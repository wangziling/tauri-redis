var t;!function(t){t.System="system",t.Dark="dark",t.Light="light"}(t||(t={}));var e=function(){return e=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},e.apply(this,arguments)};function n(){}function r(t){return t()}function o(t,...e){if(null==t){for(const t of e)t(void 0);return n}const r=t.subscribe(...e);return r.unsubscribe?()=>r.unsubscribe():r}function u(t){let e;return o(t,(t=>e=t))(),e}"function"==typeof SuppressedError&&SuppressedError;const i=[];function s(t,e=n){let r;const o=new Set;function u(e){if(u=e,((n=t)!=n?u==u:n!==u||n&&"object"==typeof n||"function"==typeof n)&&(t=e,r)){const e=!i.length;for(const e of o)e[1](),i.push(e,t);if(e){for(let t=0;t<i.length;t+=2)i[t][0](i[t+1]);i.length=0}}var n,u}function s(e){u(e(t))}return{set:u,update:s,subscribe:function(i,c=n){const f=[i,c];return o.add(f),1===o.size&&(r=e(u,s)||n),i(t),()=>{o.delete(f),0===o.size&&r&&(r(),r=null)}}}}function c(t,e,u){const i=!Array.isArray(t),c=i?[t]:t;if(!c.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const f=e.length<2;return p=(t,u)=>{let s=!1;const p=[];let a=0,l=n;const g=()=>{if(a)return;l();const r=e(i?p[0]:p,t,u);f?t(r):l="function"==typeof r?r:n},y=c.map(((t,e)=>o(t,(t=>{p[e]=t,a&=~(1<<e),s&&g()}),(()=>{a|=1<<e}))));return s=!0,g(),function(){y.forEach(r),l(),s=!1}},{subscribe:s(u,p).subscribe};var p}var f=Object.defineProperty;function p(t,e=!1){let n=window.crypto.getRandomValues(new Uint32Array(1))[0],r=`_${n}`;return Object.defineProperty(window,r,{value:n=>(e&&Reflect.deleteProperty(window,r),t?.(n)),writable:!1,configurable:!0}),n}async function a(t,e={}){return new Promise(((n,r)=>{let o=p((t=>{n(t),Reflect.deleteProperty(window,`_${u}`)}),!0),u=p((t=>{r(t),Reflect.deleteProperty(window,`_${o}`)}),!0);window.__TAURI_IPC__({cmd:t,callback:o,error:u,...e})}))}function l(t,e="asset"){return window.__TAURI__.convertFileSrc(t,e)}function g(t){return a("plugin:setting|get",{key:t})}function y(t){return a("plugin:setting|get_preset",{key:t})}function h(t,e){return a("plugin:setting|set",{key:t,value:e})}function d(){return a("plugin:setting|reset")}((t,e)=>{for(var n in e)f(t,n,{get:e[n],enumerable:!0})})({},{convertFileSrc:()=>l,invoke:()=>a,transformCallback:()=>p});var v=function(){function n(){this._resources=s({presets:{themes:[]},settings:{theme:t.System,language:"en-US",fontFamily:[],redisEachScanCount:1e3}}),this._update=this._update.bind(this)}return n.prototype._update=function(t){return this._resources.set(t),t},n.prototype.resources=function(){return a("plugin:setting|resources").then(this._update)},n.prototype.presets=function(){var t=this;return a("plugin:setting|presets").then((function(n){return t._update(e(e({},u(t._resources)),{presets:n}))}))},n.prototype.settings=function(){var t=this;return a("plugin:setting|settings").then((function(n){return t._update(e(e({},u(t._resources)),{settings:n}))}))},n.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return g.apply(void 0,t)},n.prototype.getPreset=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return y.apply(void 0,t)},n.prototype.set=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return h.apply(void 0,e).then((function(e){return t.resources().then((function(){return e}))}))},n.prototype.reset=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return d.apply(void 0,e).then((function(e){return t.resources().then((function(){return e}))}))},n.prototype.getTheme=function(){return this.get("theme")},n.prototype.getLanguage=function(){return this.get("language")},n.prototype.subscribe=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._resources).subscribe.apply(t,e)},n.prototype.derived=function(t){return c(this._resources,(function(e){return"function"==typeof t?t(e):e}))},n}(),b=new v;export{t as Theme,b as settings};
